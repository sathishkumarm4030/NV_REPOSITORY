2019-09-05 18:04:33,378 - CPE27-HKG-DDI-SEC - INFO - CPE NAME:CPE27-HKG-DDI-SEC
2019-09-05 18:04:34,378 - CPE27-HKG-DDI-SEC - INFO - SOLUTION SELECTED:DUAL-CPE-DUAL-INTERNET
2019-09-05 18:04:35,625 - CPE27-HKG-DDI-SEC - INFO - {u'versanms.sdwan-org-workflow': {u'ikeAuthType': u'psk', u'globalId': 90, u'orgName': u'IPC00190', u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC01-N6-SIN', u'NV-WC02-N1-HKG', u'NV-WC02-N6-SIN'], u'bandwidth': 10, u'parentOrg': u'Colt', u'vrfs': [{u'name': u'LAN1-VRF', u'enableVPN': True, u'id': 1020}, {u'name': u'LAN2-VRF', u'enableVPN': True, u'id': 1021}, {u'name': u'LAN3-VRF', u'enableVPN': True, u'id': 1022}, {u'name': u'LAN4-VRF', u'enableVPN': True, u'id': 1023}, {u'name': u'LAN5-VRF', u'enableVPN': True, u'id': 1024}, {u'name': u'LAN6-VRF', u'enableVPN': True, u'id': 1025}, {u'name': u'LAN7-VRF', u'enableVPN': True, u'id': 1026}, {u'name': u'LAN8-VRF', u'enableVPN': True, u'id': 1027}, {u'name': u'LAN9-VRF', u'enableVPN': True, u'id': 1028}, {u'name': u'LAN10-VRF', u'enableVPN': True, u'id': 1029}], u'solutionTier': u'base-sdwan', u'sharedControlPlane': False}}
2019-09-05 18:04:35,907 - CPE27-HKG-DDI-SEC - INFO - {u'versanms.sdwan-org-workflow': {u'ikeAuthType': u'psk', u'globalId': 90, u'orgName': u'IPC00190', u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC01-N6-SIN', u'NV-WC02-N1-HKG', u'NV-WC02-N6-SIN'], u'bandwidth': 10, u'parentOrg': u'Colt', u'vrfs': [{u'name': u'LAN1-VRF', u'enableVPN': True, u'id': 1020}, {u'name': u'LAN2-VRF', u'enableVPN': True, u'id': 1021}, {u'name': u'LAN3-VRF', u'enableVPN': True, u'id': 1022}, {u'name': u'LAN4-VRF', u'enableVPN': True, u'id': 1023}, {u'name': u'LAN5-VRF', u'enableVPN': True, u'id': 1024}, {u'name': u'LAN6-VRF', u'enableVPN': True, u'id': 1025}, {u'name': u'LAN7-VRF', u'enableVPN': True, u'id': 1026}, {u'name': u'LAN8-VRF', u'enableVPN': True, u'id': 1027}, {u'name': u'LAN9-VRF', u'enableVPN': True, u'id': 1028}, {u'name': u'LAN10-VRF', u'enableVPN': True, u'id': 1029}], u'solutionTier': u'base-sdwan', u'sharedControlPlane': False}}
2019-09-05 18:04:36,184 - CPE27-HKG-DDI-SEC - INFO - {u'versanms.sdwan-org-workflow': {u'ikeAuthType': u'psk', u'globalId': 90, u'orgName': u'IPC00190', u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC01-N6-SIN', u'NV-WC02-N1-HKG', u'NV-WC02-N6-SIN'], u'bandwidth': 10, u'parentOrg': u'Colt', u'vrfs': [{u'name': u'LAN1-VRF', u'enableVPN': True, u'id': 1020}, {u'name': u'LAN2-VRF', u'enableVPN': True, u'id': 1021}, {u'name': u'LAN3-VRF', u'enableVPN': True, u'id': 1022}, {u'name': u'LAN4-VRF', u'enableVPN': True, u'id': 1023}, {u'name': u'LAN5-VRF', u'enableVPN': True, u'id': 1024}, {u'name': u'LAN6-VRF', u'enableVPN': True, u'id': 1025}, {u'name': u'LAN7-VRF', u'enableVPN': True, u'id': 1026}, {u'name': u'LAN8-VRF', u'enableVPN': True, u'id': 1027}, {u'name': u'LAN9-VRF', u'enableVPN': True, u'id': 1028}, {u'name': u'LAN10-VRF', u'enableVPN': True, u'id': 1029}], u'solutionTier': u'base-sdwan', u'sharedControlPlane': False}}
2019-09-05 18:04:46,144 - CPE27-HKG-DDI-SEC - INFO - set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config interfaces vni vni-0/3 description "INTERCONNECT-LINK"
delete devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR routing-options static route
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system vnf-manager ip-addresses [ 10.92.116.67/32 10.92.116.68/32 ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 hold-time 90
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart enable
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart maximum-restart-time 120
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart recovery-time 120
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart select-defer-time 120
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart stalepath-time 120
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart dynamic-peer-restart-time 0
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match family inet-vpn
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match community "(^|,)([0-9]*:11)($|,)"
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action filter accept
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community 8009:8009
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community-action set-specific
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action set-local-preference 80
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match family inet-vpn
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match community "(^|,)([0-9]*:12)($|,)"
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action filter accept
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community 8009:8009
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community-action set-specific
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action set-local-preference 60
move devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 first
move devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 first
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard match family inet-vpn
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action filter accept
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action community 852:10
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action community-action set-specific
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard match family versa-private
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action filter accept
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community 852:10
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community-action set-specific
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 group Controllers-Group family inet unicast
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 group Controllers-Group export TO_SDWAN

delete devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 cgnat rules rule RFC_1918_NoTranslate


###########################################################
#Note: Please use the below config, in case of Wired solution. Both CPEs on Wired
###########################################################
delete device template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule Default-Rule
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names local [ INT-WAN1 INT-WAN2 ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names remote [ INT-WAN INT-WAN1 INT-WAN2 ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names local [ INT-WAN1 INT-WAN2 ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names remote [ LTE-WAN ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE connection-selection-method weighted-round-robin
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE recompute-timer 40
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE encryption optional
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE symmetric-forwarding enable
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE description DEFAULT-TRAFFIC-RULE
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE set forwarding-profile DEFAULT-TRAFFIC-PROFILE


Below Lines should be applied depending on the Number LAN VRFs available. Below is the example for 10VRFs.



set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects zones zone Intf-LAN1-Zone description LAN1



set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF vrf-import-target target:1020L:10202

set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config snmp usm local user coltuser auth sha password Colt1234

set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system time-zone Greenwich
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config confdConfig cli banner "Access to this network/system is limited to users authorised by Colt for its legitimate business purposes. Unauthorised access, use, installation of files or modification of any data is prohibited. Use of this system/network will be audited"
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system users portal login shell role admin password yA:D#{}Vn9JE-?Qa
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system users portal ssh-public-key portal contents "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDo+WWU8BDyqZCYadUGElffuy1pkOo4nrg/yfOqV84G+ukVGf+SF48h+543zMxMmKTauHEqmSp+74IbSpN9buBom/BFpBTm3c66BErMmLNariqvfItG7CO9UBPqoXpUBAXnF/muohwe145jEyRRI4Lof2wK6F6qYjzTQHK+zp5IpV6D+VurfQ6fIQB2oUIj9c8OG3Zfyp33l9utdLCzR7Uo4OGt9GidMrO2mXSBWXb+L5o6MAiOB4EhKvVyG9O8+So7zHEcUI65bq3JWzLzM7w705ySVwitEeqCx2wS7v/2KNuHmI8kSQVOuXQ539V3PJThvlVPY7ABmrY5+4MZT+Fv novitas@colt.net"

set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa auth-order remote-then-local
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa tacacs-plus server 10.5.22.116 key C:ifiiape.
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa tacacs-plus server 10.5.22.117 key C:ifiiape.
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa tacacs-plus action [ accounting authentication ]


#PART2:
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config interfaces vni vni vni-0/2 description "INT-WAN2"

############################################
#Note : This section only required if LIB is there.

############################################

set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services predefined-services-list [ ESP ICMP ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services services-list [ IPSEC IPSecAH ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services predefined-services-list [ ESP ICMP ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services services-list [ IPSEC IPSIPSecAH ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match ether-type ARP
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match ether-type ARP
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match services services-list [ DHCP-67 DHCP-68 ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match services services-list [ DHCP-67 DHCP-68 ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT match destination zone zone-list [ Intf-INT-WAN2-Failover-Zone Intf-INT-WAN1-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN match source zone zone-list [ Intf-INT-WAN2-Failover-Zone Intf-INT-WAN1-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN set action allow
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN set action deny
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT set action deny
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSEC protocol UDP
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSEC port 4790,4500,500
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSecAH protocol AH
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSIPSecAH protocol AH
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-67 protocol UDP
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-67 port 67
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-68 protocol UDP
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-68 port 68

#Repeat following config for all LAN VRFs with corresponding <LAN_NO>. This is only required for LIB


#Similarly below Lines should be applied depending on the Number LAN VRFs available. Below is the example for LAN1-VRF.
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC match protocol static
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action filter accept
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action set-origin igp
set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action set-local-preference 109

2019-09-05 18:05:35,128 - CPE27-HKG-DDI-SEC - INFO - configure
Entering configuration mode private
[ok][2019-09-05 11:20:52]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config interfaces vni vni-0/3 description "INTERCONNECT-LINK"
[ok][2019-09-05 11:20:54]

[edit]
Automated@VDir-BLR-NEW-01% delete devices template IPC00190-HKG-PS-D-IOS-LIB-LS  config routing-instances routing-instance IPC00190-Control-VR routing-options static route
[ok][2019-09-05 11:20:55]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system vnf-manager ip-addresses [ 10.92.116.67/32 10.92.116.68/32 ]
[ok][2019-09-05 11:20:55]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  hold-time 90
[ok][2019-09-05 11:20:55]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  graceful-restart enable
[ok][2019-09-05 11:20:56]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  graceful-restart maximum-restart-time 120
[ok][2019-09-05 11:20:56]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  graceful-restart recovery-time 120
[ok][2019-09-05 11:20:57]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  graceful-restart select-defer-time 120
[ok][2019-09-05 11:20:57]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  graceful-restart stalepath-time 120
[ok][2019-09-05 11:20:58]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  graceful-restart dynamic-peer-restart-time 0
[ok][2019-09-05 11:20:58]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match family inet-vpn
[ok][2019-09-05 11:20:59]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match community "(^|,)([0-9]*:11)($|,)"
[ok][2019-09-05 11:20:59]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action filter accept
[ok][2019-09-05 11:21:00]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community 8009:8009
[ok][2019-09-05 11:21:01]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community-action set-specific
[ok][2019-09-05 11:21:01]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action set-local-preference 80
[ok][2019-09-05 11:21:02]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match family inet-vpn
[ok][2019-09-05 11:21:02]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match community "(^|,)([0-9]*:12)($|,)"
[ok][2019-09-05 11:21:03]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action filter accept
[ok][2019-09-05 11:21:03]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community 8009:8009
[ok][2019-09-05 11:21:04]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community-action set-specific
[ok][2019-09-05 11:21:04]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action set-local-preference 60
[ok][2019-09-05 11:21:05]

[edit]
Automated@VDir-BLR-NEW-01% move devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 2GW2 first
[ok][2019-09-05 11:21:05]

[edit]
Automated@VDir-BLR-NEW-01% move devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy Import-From-SDWAN-Policy term 1GW1 first
[ok][2019-09-05 11:21:06]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term Wildcard match family inet-vpn
[ok][2019-09-05 11:21:06]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term Wildcard action filter accept
[ok][2019-09-05 11:21:07]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term Wildcard action community 852:10
[ok][2019-09-05 11:21:07]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term Wildcard action community-action set-specific
[ok][2019-09-05 11:21:08]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term VersaPvt-Wildcard match family versa-private
[ok][2019-09-05 11:21:08]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action filter accept
[ok][2019-09-05 11:21:09]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community 852:10
[ok][2019-09-05 11:21:09]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community-action set-specific
[ok][2019-09-05 11:21:09]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  group Controllers-Group family inet unicast
[ok][2019-09-05 11:21:10]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90  group Controllers-Group export TO_SDWAN
[ok][2019-09-05 11:21:10]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% delete devices template IPC00190-HKG-PS-D-IOS-LIB-LS  config orgs org-services IPC00190 cgnat rules rule RFC_1918_NoTranslate
[ok][2019-09-05 11:21:10]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% ###########################################################
[ok][2019-09-05 11:21:10]

[edit]
Automated@VDir-BLR-NEW-01% #Note: Please use the below config, in case of Wired  solution. Both CPEs on Wired
[ok][2019-09-05 11:21:10]

[edit]
Automated@VDir-BLR-NEW-01% ###########################################################
[ok][2019-09-05 11:21:10]

[edit]
Automated@VDir-BLR-NEW-01% delete devices template IPC00190-HKG-PS-D-IOS-LIB-LS  config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule Default-Rule
Error: element not found
[error][2019-09-05 11:21:11]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names local [ INT-WAN1 INT-WAN2 ]
[ok][2019-09-05 11:21:11]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names remote [ INT-WAN INT-WAN1 INT-WAN2 ]
[ok][2019-09-05 11:21:12]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names local [ INT-WAN1 INT-WAN2 ]
[ok][2019-09-05 11:21:12]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names remote [ LTE-WAN ]
[ok][2019-09-05 11:21:13]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE connection-selection-method weighted-round-robin
[ok][2019-09-05 11:21:13]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE recompute-timer 40
[ok][2019-09-05 11:21:13]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE encryption optional
[ok][2019-09-05 11:21:14]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE symmetric-forwarding enable
[ok][2019-09-05 11:21:14]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy  rules rule DEFAULT-TRAFFIC-RULE description DEFAULT-TRAFFIC-RULE
[ok][2019-09-05 11:21:14]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy  rules rule DEFAULT-TRAFFIC-RULE set action allow
[ok][2019-09-05 11:21:15]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy  rules rule DEFAULT-TRAFFIC-RULE set forwarding-profile DEFAULT-TRAFFIC-PROFILE
[ok][2019-09-05 11:21:15]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% Below Lines should be applied depending on the Number  LAN VRFs available. Below is the example for 10VRFs.
---------------------------^
syntax error: expecting 
  activate        - Activate a statement
  annotate        - Add a comment to a statement
  clear           - 
  commit          - Commit current set of changes
  compare         - Show configuration differences
  copy            - Copy a list entry
  deactivate      - Deactivate a statement
  delete          - Delete a data element
  describe        - Display transparent command  information
  edit            - Edit a sub-element
  exit            - Exit from this level
  help            - Provide help information
  insert          - Insert a parameter
  load            - Load configuration from an ASCII file
  move            - Move a parameter
  quit            - Exit from this level
  rename          - Rename an identifier
  request         - Make system-level requests
  resolved        - Conflicts have been resolved
  revert          - Copy configuration from running
  rollback        - Roll back database to last committed version
  run             - Run an operational-mode command
  save            - Save configuration to an ASCII file
  save-device-cfg - save device settings
  set             - Set a parameter
  shell           - Open a shell
  show            - Show a parameter
  status          - Display users currently editing the configuration
  switch          - Change CLI style
  tag             - Manipulate statement tags
  top             - Exit to top level and optionally run command
  up              - Exit one level of configuration
  validate        - Validate current configuration
[error][2019-09-05 11:21:15]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects zones zone Intf-LAN1-Zone description LAN1
[ok][2019-09-05 11:21:16]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF vrf-import-target target:1020L:10202
[ok][2019-09-05 11:21:16]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config snmp usm local user coltuser auth sha password Colt1234
[ok][2019-09-05 11:21:16]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system time-zone Greenwich
[ok][2019-09-05 11:21:17]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config confdConfig cli banner "Access to this network/system is limited to users authorised by Colt for its legitimate business purposes. Unauthorised access, use,  installation of files or modification of any data is prohibited. Use of this system/network will be audited"
[ok][2019-09-05 11:21:17]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system users portal login shell role admin password yA:D#{}Vn9JE-?Qa
[ok][2019-09-05 11:21:17]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system users portal ssh-public-key portal contents "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDo+WWU8BDyqZCYadUGElffuy1pkOo4nrg/yfOqV84G+ukVGf+SF48h+543zMxMmKTauHEqmSp+74IbSpN9buBom/BFpBTm3c66BErMmLNariqvfItG7CO9UBPqoXpUBAXnF/muohwe145jEyRRI4Lof2wK6F6qYjzTQHK+zp5IpV6D+VurfQ6fIQB2oUIj9c8OG3Zfyp33l9utdLCzR7Uo4OGt9GidMrO2mXSBWXb+L5o6MAiOB4EhKvVyG9O8+So7zHEcUI65bq3JWzLzM7w705ySVwitEeqCx2wS7v/2KNuHmI8kSQVOuXQ539V3PJThvlVPY7ABmrY5+4MZT+Fv novitas@colt.net"
[ok][2019-09-05 11:21:17]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa auth-order remote-then-local
[ok][2019-09-05 11:21:18]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa tacacs-plus server 10.5.22.116 key C:ifiiape.
[ok][2019-09-05 11:21:18]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa tacacs-plus server 10.5.22.117 key C:ifiiape.
[ok][2019-09-05 11:21:18]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config system external-aaa tacacs-plus action [ accounting authentication ]
[ok][2019-09-05 11:21:19]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #PART2:
[ok][2019-09-05 11:21:19]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config interfaces vni vni vni-0/2 description "INT-WAN2"
-------------------------------------------------------------------------------------------------------^
syntax error: element does not exist
[error][2019-09-05 11:21:19]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% ############################################
[ok][2019-09-05 11:21:19]

[edit]
Automated@VDir-BLR-NEW-01% #Note : This section only required if LIB is there.
[ok][2019-09-05 11:21:19]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% ############################################
[ok][2019-09-05 11:21:19]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:20]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services predefined-services-list [  ESP ICMP ]
[ok][2019-09-05 11:21:20]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services services-list [ IPSEC IPSecAH ]
[ok][2019-09-05 11:21:21]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN set action allow
[ok][2019-09-05 11:21:21]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:21]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services predefined-services-list  [ ESP ICMP ]
[ok][2019-09-05 11:21:22]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services services-list [ IPSEC IPSIPSecAH ]
[ok][2019-09-05 11:21:22]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT set action allow
[ok][2019-09-05 11:21:23]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:23]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match ether-type ARP
[ok][2019-09-05 11:21:24]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN set action allow
[ok][2019-09-05 11:21:24]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:25]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match ether-type ARP
[ok][2019-09-05 11:21:25]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT set action allow
[ok][2019-09-05 11:21:26]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:26]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match services services-list [ DHCP-67 DHCP-68 ]
[ok][2019-09-05 11:21:27]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN set action allow
[ok][2019-09-05 11:21:27]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:28]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match services services-list [ DHCP-67 DHCP-68 ]
[ok][2019-09-05 11:21:28]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT set action allow
[ok][2019-09-05 11:21:29]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT match destination zone zone-list [ Intf-INT-WAN2-Failover-Zone Intf-INT-WAN1-Zone ]
[ok][2019-09-05 11:21:29]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT set action allow
[ok][2019-09-05 11:21:30]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN match source zone zone-list [ Intf-INT-WAN2-Failover-Zone Intf-INT-WAN1-Zone ]
[ok][2019-09-05 11:21:30]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN set action allow
[ok][2019-09-05 11:21:31]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN match source zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:31]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN set action deny
[ok][2019-09-05 11:21:32]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT match destination zone zone-list [ Intf-INT-WAN2-Zone Intf-INT-WAN1-Zone Intf-INT-WAN2-Failover-Zone ]
[ok][2019-09-05 11:21:32]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT set action deny
[ok][2019-09-05 11:21:33]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSEC protocol UDP
[ok][2019-09-05 11:21:33]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSEC port 4790,4500,500 
[ok][2019-09-05 11:21:33]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSecAH protocol AH
[ok][2019-09-05 11:21:33]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service IPSIPSecAH protocol AH
[ok][2019-09-05 11:21:33]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-67 protocol UDP
[ok][2019-09-05 11:21:34]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-67 port 67
[ok][2019-09-05 11:21:34]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-68 protocol UDP
[ok][2019-09-05 11:21:35]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config orgs org-services IPC00190 objects services service DHCP-68 port 68
[ok][2019-09-05 11:21:35]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #Repeat following config for all LAN VRFs with corresponding <LAN_NO>. This is only required for LIB
[ok][2019-09-05 11:21:35]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #Similarly below Lines should be applied depending on  the Number LAN VRFs available. Below is the example for LAN1-VRF.
[ok][2019-09-05 11:21:35]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC match protocol static
[ok][2019-09-05 11:21:35]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action filter accept
[ok][2019-09-05 11:21:36]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action set-origin igp
[ok][2019-09-05 11:21:36]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-HKG-PS-D-IOS-LIB-LS config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action set-local-preference 109
[ok][2019-09-05 11:21:36]

[edit]
Automated@VDir-BLR-NEW-01% 
2019-09-05 18:05:35,937 - CPE27-HKG-DDI-SEC - INFO - commit
Commit complete.
[ok][2019-09-05 11:21:39]

[edit]
Automated@VDir-BLR-NEW-01% 
2019-09-05 18:05:36,055 - CPE27-HKG-DDI-SEC - INFO - 
CPE27-HKG-DDI-SEC : syntax error found.Commit success.
2019-09-05 18:05:36,055 - CPE27-HKG-DDI-SEC - INFO - 
 >>>>>>>>>> Secondary PS MAIN TEMPLATE MODIFY PASSED. <<<<<<<<<<<

2019-09-05 18:05:41,055 - CPE27-HKG-DDI-SEC - INFO - 
STEP : DEVICE GROUP CREATION AND DEPLOYMENT

2019-09-05 18:05:41,176 - CPE27-HKG-DDI-SEC - INFO - <Response [400]>
2019-09-05 18:05:41,176 - CPE27-HKG-DDI-SEC - INFO - {"timestamp":1567682504822,"status":400,"error":"Bad Request","exception":"java.lang.IllegalArgumentException","message":" A device group with name  IPC00190-HKG-PS-D-IOS-LIB-DG already exists ","path":"/nextgen/deviceGroup"}
2019-09-05 18:05:41,177 - CPE27-HKG-DDI-SEC - INFO - 
FAIL : {"timestamp":1567682504822,"status":400,"error":"Bad Request","exception":"java.lang.IllegalArgumentException","message":" A device group with name  IPC00190-HKG-PS-D-IOS-LIB-DG already exists ","path":"/nextgen/deviceGroup"}
2019-09-05 18:05:41,177 - CPE27-HKG-DDI-SEC - INFO - 
 >>>>>>>>>> DEVICE GROUP TEMPLATE CREATION FAILED. <<<<<<<<<<<

