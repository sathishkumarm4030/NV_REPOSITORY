2019-02-07 13:19:08,494 - VD1 - INFO - ORG NAME:JAN232
2019-02-07 13:19:08,633 - VD1 - DEBUG - {
  "versanms.sdwan-org-workflow": {
    "orgName": "JAN232",
    "globalId": "232",
    "parentOrg": "Colt",
    "ikeAuthType": "psk",
    "sharedControlPlane": false,
    "controllers": ["NV-WC01-N2-BLR", "NV-WC02-N4-MUM", "NV-WC02-N2-BLR"],
    "vrfs": [{ "name": "LAN1-VRF", "id": "2440", "enableVPN": "true", "tooltip": "" },{ "name": "LAN2-VRF", "id": "2441", "enableVPN": "true", "tooltip": "" },{ "name": "LAN3-VRF", "id": "2442", "enableVPN": "true", "tooltip": "" },{ "name": "LAN4-VRF", "id": "2443", "enableVPN": "true", "tooltip": "" }],
    "supportedRoles": []
  }
}
2019-02-07 13:19:08,633 - VD1 - INFO - PASS
2019-02-07 13:19:26,159 - VD1 - INFO - set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 mode ipsec
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 type p2mp-vxlan
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 unit 0 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 description "VxLAN JAN232 Management"
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 unit 0 family
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 unit 0 family inet
set devices device NV-GW01-N2-BLR config interfaces tvi-0/464 unit 0 family inet address 30.232.2.1/32

set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 mode ipsec
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 type p2mp-esp
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 unit 0 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 description "ESP JAN232 Management"
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 unit 0 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 unit 0 family
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 unit 0 family inet
set devices device NV-GW01-N2-BLR config interfaces tvi-0/465 unit 0 family inet address /32

set devices device NV-GW01-N2-BLR config interfaces ptvi464 parent-interface tvi-0/465.0 remote-address 10.232.64.23

set devices device NV-GW01-N2-BLR config interfaces ptvi465 parent-interface tvi-0/465.0 remote-address 10.232.64.24




set devices device NV-GW01-N2-BLR config interfaces vni-0/0 unit 2440 vlan-id 2440
set devices device NV-GW01-N2-BLR config interfaces vni-0/0 unit 2440 enable true
set devices device NV-GW01-N2-BLR config interfaces vni-0/0 unit 2440 family
set devices device NV-GW01-N2-BLR config interfaces vni-0/0 unit 2440 family inet
set devices device NV-GW01-N2-BLR config interfaces vni-0/0 unit 2440 family inet address 193.232.1.2/30





set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 mode ipsec
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 type paired
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 paired-interface tvi-0/4340
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 unit 0 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 unit 0 family
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 unit 0 family inet
set devices device NV-GW01-N2-BLR config interfaces tvi-0/2440 unit 0 family inet address 10.63.47.65/30

set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 mode ipsec
set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 type paired
set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 paired-interface tvi-0/2440
set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 unit 0 enable true
set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 unit 0 family
set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 unit 0 family inet
set devices device NV-GW01-N2-BLR config interfaces tvi-0/4340 unit 0 family inet address 10.63.47.66/30

set devices device NV-GW01-N2-BLR config networks JAN232-MPLS1 interfaces [ vni-0/0.2440 ]






set devices device NV-GW01-N2-BLR config orgs org JAN232 available-routing-instances [ INT-TRANSP-VR MPLS-TRANSP-VR JAN232-Control-VR JAN232-EXPORT1-VRF JAN232-LAN1-VRF ]
set devices device NV-GW01-N2-BLR config orgs org JAN232 traffic-identification using [ ptvi464 ptvi465 tvi-0/464.0 tvi-0/465.0 tvi-0/2440.0 tvi-0/4340.0 ]
set devices device NV-GW01-N2-BLR config orgs org JAN232 owned-routing-instances [ INT-TRANSP-VR MPLS-TRANSP-VR JAN232-Control-VR JAN232-EXPORT1-VRF JAN232-LAN1-VRF ]
set devices device NV-GW01-N2-BLR config orgs org JAN232 traffic-identification using-networks [ JAN232-MPLS1 ]

set devices device NV-GW01-N2-BLR config orgs org JAN232 available-provider-orgs [ JAN232 ]
set devices device NV-GW01-N2-BLR config orgs org JAN232 available-service-node-groups [ default-sng ]
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site global-tenant-id 232
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site site-name NV-GW01-N2-BLR
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site management-routing-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site wan-interfaces vni-0/1.454 sla-monitoring fc_be interval 1
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site wan-interfaces vni-0/1.454 sla-monitoring fc_be logging-interval 5
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site wan-interfaces vni-0/1.454 encryption optional
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site wan-interfaces vni-0/1.464 sla-monitoring fc_be interval 1
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan site wan-interfaces vni-0/1.464 sla-monitoring fc_be logging-interval 5
set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan controllers NV-WC01-N2-BLR management-addresses IKE ip-address 10.232.0.23 routing-instance JAN232-Control-VR

set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan controllers NV-WC01-N2-BLR management-addresses secure ip-address 10.232.64.23 routing-instance JAN232-Control-VR

set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan controllers NV-WC02-N2-BLR management-addresses IKE ip-address 10.232.0.24 routing-instance JAN232-Control-VR

set devices device NV-GW01-N2-BLR config orgs org JAN232 sd-wan controllers NV-WC02-N2-BLR management-addresses secure ip-address 10.232.64.24 routing-instance JAN232-Control-VR


set devices device NV-GW01-N2-BLR config orgs org-services JAN232 security access-policies Policy1 rules R1 set action allow
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 security access-policies Policy1 rules R1 set lef profile Default-Logging-Profile
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 security access-policies Policy1 rules R1 set lef event end
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 security access-policies Policy1 rules R1 set lef options send-pcap-data enable false
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 objects zones trust
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 objects zones untrust
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 objects zones host
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 traffic-monitoring logging-control Default-Logging-Control profile Default-Logging-Profile
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 traffic-monitoring logging-control Default-Logging-Control options
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 traffic-monitoring logging-control Default-Logging-Control options stats
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 traffic-monitoring logging-control Default-Logging-Control options stats all
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 traffic-monitoring policies Analytics-policy rules rule1 set lef profile Default-Logging-Profile
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 lef collectors LEF-Collector-log_collector1 destination-address 10.91.116.71 destination-port 5140 routing-instance JAN232-Control-VR transport tcp template Default-LEF-Template




set devices device NV-GW01-N2-BLR config orgs org-services JAN232 lef collectors LEF-Collector-log_collector2 destination-address 10.91.116.72 destination-port 5140 routing-instance JAN232-Control-VR transport tcp template Default-LEF-Template




set devices device NV-GW01-N2-BLR config orgs org-services JAN232 lef collector-groups Default-Collector-Group collectors [ LEF-Collector-log_collector1 LEF-Collector-log_collector2 ]
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 lef templates Default-LEF-Template type ipfix
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 lef profiles Default-Logging-Profile collector-group Default-Collector-Group
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 lef default-profile Default-Logging-Profile
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 vpn-type branch-sdwan
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local-auth-info
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local-auth-info auth-type psk
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local-auth-info id-type email
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local-auth-info key NV-GW01-N2-BLR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local-auth-info id-string NV-GW01-N2-BLR@JAN232.com
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 local address 30.232.2.1
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 routing-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 tunnel-routing-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 tunnel-initiate automatic
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ipsec fragmentation pre-fragmentation
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ipsec transform esp-aes128-sha1
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ipsec mode tunnel
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ipsec pfs-group mod-none
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ipsec anti-replay enable
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ipsec life duration 25000
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ike version v2
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ike group mod19
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ike transform aes128-sha1
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ike lifetime 27000
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 ike dpd-timeout 10
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer-auth-info
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer-auth-info auth-type psk
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer-auth-info id-type email
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer-auth-info key NV-GW01-N2-BLR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer-auth-info id-string NV-WC01-N2-BLR@JAN232.com
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 peer address 10.232.0.23
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL1 tunnel-interface ptvi464
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 vpn-type branch-sdwan
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local-auth-info
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local-auth-info auth-type psk
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local-auth-info id-type email
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local-auth-info key NV-GW01-N2-BLR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local-auth-info id-string NV-GW01-N2-BLR@JAN232.com
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 local address 30.232.2.1
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 routing-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 tunnel-routing-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 tunnel-initiate automatic
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ipsec fragmentation pre-fragmentation
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ipsec transform esp-aes128-sha1
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ipsec mode tunnel
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ipsec pfs-group mod-none
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ipsec anti-replay enable
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ipsec life duration 25000
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ike version v2
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ike group mod19
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ike transform aes128-sha1
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ike lifetime 27000
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 ike dpd-timeout 10
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer-auth-info
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer-auth-info auth-type psk
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer-auth-info id-type email
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer-auth-info key NV-GW01-N2-BLR
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer-auth-info id-string NV-WC02-N2-BLR@JAN232.com
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 peer address 10.232.0.24
set devices device NV-GW01-N2-BLR config orgs org-services JAN232 ipsec vpn-profile GW-CTRL2 tunnel-interface ptvi465

set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR instance-type virtual-router
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR mpls-vpn-core
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR interfaces [ ptvi464 ptvi465 tvi-0/464.0 tvi-0/465.0 ]
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR routing-options mpls-vpn-local-router-address 
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR routing-options static route 0.0.0.0/0  tvi-0/465.0 preference 1
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR routing-options static route 0.0.0.0/0  tvi-0/465.0 tag 0
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 router-id  local-as as-number 65505
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 hold-time 90
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 peer-as 65505
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 route-flap free-max-time 180
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 route-flap reuse-max-time 60
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 route-flap reuse-size 256
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 route-flap reuse-array-size 1024
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 graceful-restart enable
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 graceful-restart maximum-restart-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 graceful-restart recovery-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 graceful-restart select-defer-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 graceful-restart stalepath-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 graceful-restart dynamic-peer-restart-time 0

set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 ibgp-preference 200
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 ebgp-preference 20

set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC type internal
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC family inet unicast
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC family inet versa-private
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC family inet-vpn unicast
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC bfd-liveness-detection
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC bfd-liveness-detection minimum-receive-interval 1000
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC bfd-liveness-detection multiplier 3
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC bfd-liveness-detection transmit-interval minimum-interval 1000
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC neighbor 10.232.64.23
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC neighbor 10.232.64.23 peer-as 65505
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC neighbor 10.232.64.24
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 group GW-WC neighbor 10.232.64.24 peer-as 65505
set devices device NV-GW01-N2-BLR config routing-instances JAN232-Control-VR protocols bgp 232 debug level debug

#completed



set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-BGP match protocol bgp
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-BGP action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF policy-options redistribute-to-bgp REDIS-TO-BGP
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF instance-type vrf
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF global-vrf-id 24402
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF mpls-vpn-core-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF interfaces [ tvi-0/4340.0 ]
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF route-distinguisher 2440L:24402
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF vrf-export-target target:2440L:24402
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 router-id 10.63.47.66 local-as as-number 65506
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 route-flap free-max-time 180
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 route-flap reuse-max-time 60
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 route-flap reuse-size 256
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 route-flap reuse-array-size 1024
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 graceful-restart maximum-restart-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 graceful-restart recovery-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 graceful-restart select-defer-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 graceful-restart stalepath-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 graceful-restart dynamic-peer-restart-time 0
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 prefix-list NNI1-INT seq 10 permit
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 prefix-list NNI1-INT seq 10 address-family ipv4 unicast address-mask 193.232.1.0/30
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 prefix-list NNI1-INT seq 10 address-family ipv4 unicast ge_le ge 30
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 prefix-list NNI1-INT seq 10 address-family ipv4 unicast ge_le le 32


set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 1REJECT-NNI-INT match ip nlri prefix-list NNI1-INT
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 1REJECT-NNI-INT action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 2REJECT-NNI-ROUTES match community "(^|,)91:20($|,)"
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 2REJECT-NNI-ROUTES action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 3ACCEPT-REST action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 3ACCEPT-REST action community 91:11
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 routing-peer-policy IMPORT-POLICY-FROM-LAN-VRF term 3ACCEPT-REST action community-action set-specific

set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 ibgp-preference 200
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 ebgp-preference 20

set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 group EBGP-With-LAN_VRF type external
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 group EBGP-With-LAN_VRF import IMPORT-POLICY-FROM-LAN-VRF
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 group EBGP-With-LAN_VRF neighbor 10.63.47.65 local-address 10.63.47.66
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 group EBGP-With-LAN_VRF neighbor 10.63.47.65 peer-as 15404
set devices device NV-GW01-N2-BLR config routing-instances JAN232-EXPORT1-VRF protocols bgp 23202 debug level debug


set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-BGP match protocol bgp
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-BGP action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-BGP action set-origin igp
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-DIRECT match protocol direct
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-DIRECT action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-DIRECT action set-origin igp
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-STATIC match protocol static
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-STATIC action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribution-policy REDIS-TO-BGP term ACCEPT-STATIC action set-origin igp
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF policy-options redistribute-to-bgp REDIS-TO-BGP
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF instance-type vrf
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF global-vrf-id 2440
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF networks [ JAN232-MPLS1 ]
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF mpls-vpn-core-instance JAN232-Control-VR
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF interfaces [ tvi-0/2440.0 ]
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF route-distinguisher 2440L:2440
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF vrf-import-target target:2440L:2440
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF vrf-export-target target:2440L:24402
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 router-id 193.232.1.2 local-as as-number 15404
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 route-flap free-max-time 180
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 route-flap reuse-max-time 60
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 route-flap reuse-size 256
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 route-flap reuse-array-size 1024
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 graceful-restart maximum-restart-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 graceful-restart recovery-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 graceful-restart select-defer-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 graceful-restart stalepath-time 120
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 graceful-restart dynamic-peer-restart-time 0
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 prefix-list PTVI-INT seq 10 permit
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 prefix-list PTVI-INT seq 10 address-family ipv4 unicast address-mask 10.63.47.64/30
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 prefix-list PTVI-INT seq 10 address-family ipv4 unicast ge_le ge 30
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 prefix-list PTVI-INT seq 10 address-family ipv4 unicast ge_le le 32

set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 1REJECT-PTVI-INT match ip nlri prefix-list PTVI-INT
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 1REJECT-PTVI-INT action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 2REJECT-LOOP match community "(^|,)91:11($|,)"
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 2REJECT-LOOP action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 3ADD-SDWAN-COMM match community "(^|,)91:10($|,)"
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 3ADD-SDWAN-COMM action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 3ADD-SDWAN-COMM action community 100:10
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 3ADD-SDWAN-COMM action community-action set-specific
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-POLICY-NNI term 4DENY-REST action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-PAIR-TVI-LOOP-PREV term 1DENY-LOOP match community "(^|,)91:11($|,)"
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-PAIR-TVI-LOOP-PREV term 1DENY-LOOP action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy EXPORT-PAIR-TVI-LOOP-PREV term 2ALLOW-REST action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy IMPORT-POLICY-NNI term 1REJECT-SDWAN-ROUTES match community "(^|,)100:10($|,)"
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy IMPORT-POLICY-NNI term 1REJECT-SDWAN-ROUTES action reject
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy IMPORT-POLICY-NNI term 2ACCEPT-REST action accept
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy IMPORT-POLICY-NNI term 2ACCEPT-REST action community 91:20
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 routing-peer-policy IMPORT-POLICY-NNI term 2ACCEPT-REST action community-action set-specific
##set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 router-id 193.232.1.2 local-as as-number 15404
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 ibgp-preference 200
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 ebgp-preference 20

set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-WITH-EXPORT_VRF type external
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-WITH-EXPORT_VRF export EXPORT-PAIR-TVI-LOOP-PREV
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-WITH-EXPORT_VRF neighbor 10.63.47.66 local-address 10.63.47.65
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-WITH-EXPORT_VRF neighbor 10.63.47.66 peer-as 65506
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-With-SAR-TypeA-NNI type external
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-With-SAR-TypeA-NNI import IMPORT-POLICY-NNI
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-With-SAR-TypeA-NNI export EXPORT-POLICY-NNI
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-With-SAR-TypeA-NNI neighbor 193.232.1.1 local-address 193.232.1.2
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 group EBGP-With-SAR-TypeA-NNI neighbor 193.232.1.1 peer-as 8220
set devices device NV-GW01-N2-BLR config routing-instances JAN232-LAN1-VRF protocols bgp 23201 debug level debug







tvi-0/2440.0 tvi-0/4340.0 
232
NV-GW01-N2-BLR@JAN232.com
NV-GW01-N2-BLR
JAN232-EXPORT1-VRF 
NV-WC02-N2-BLR
{1: {'second_host': '193.232.1.2', 'vlan': 2440, 'netmask': '255.255.255.252', 'first_host': '193.232.1.1', 'nw': CalcIPv4Network(u'193.232.1.0/30')}, 2: {'second_host': '193.232.1.6', 'vlan': 2441, 'netmask': '255.255.255.252', 'first_host': '193.232.1.5', 'nw': CalcIPv4Network(u'193.232.1.4/30')}, 3: {'second_host': '193.232.1.10', 'vlan': 2442, 'netmask': '255.255.255.252', 'first_host': '193.232.1.9', 'nw': CalcIPv4Network(u'193.232.1.8/30')}, 4: {'second_host': '193.232.1.14', 'vlan': 2443, 'netmask': '255.255.255.252', 'first_host': '193.232.1.13', 'nw': CalcIPv4Network(u'193.232.1.12/30')}, 5: {'second_host': '193.232.1.18', 'vlan': 2444, 'netmask': '255.255.255.252', 'first_host': '193.232.1.17', 'nw': CalcIPv4Network(u'193.232.1.16/30')}, 6: {'second_host': '193.232.1.22', 'vlan': 2445, 'netmask': '255.255.255.252', 'first_host': '193.232.1.21', 'nw': CalcIPv4Network(u'193.232.1.20/30')}, 7: {'second_host': '193.232.1.26', 'vlan': 2446, 'netmask': '255.255.255.252', 'first_host': '193.232.1.25', 'nw': CalcIPv4Network(u'193.232.1.24/30')}, 8: {'second_host': '193.232.1.30', 'vlan': 2447, 'netmask': '255.255.255.252', 'first_host': '193.232.1.29', 'nw': CalcIPv4Network(u'193.232.1.28/30')}, 9: {'second_host': '193.232.1.34', 'vlan': 2448, 'netmask': '255.255.255.252', 'first_host': '193.232.1.33', 'nw': CalcIPv4Network(u'193.232.1.32/30')}, 10: {'second_host': '193.232.1.38', 'vlan': 2449, 'netmask': '255.255.255.252', 'first_host': '193.232.1.37', 'nw': CalcIPv4Network(u'193.232.1.36/30')}}
tvi-0/465
tvi-0/464
ptvi464
vni-0/1.454
NV-GW01-N2-BLR
JAN232-MPLS1 
10.232.64.24
NV-WC02-N2-BLR@JAN232.com
1

JAN232-LAN1-VRF 
193.232.1.1
NV-GW01-N2-BLR
NV-GW01-N2-BLR
ptvi465
{1: {'second_host': '10.63.47.66', 'vlan': 2440, 'netmask': '255.255.255.252', 'first_host': '10.63.47.65', 'nw': CalcIPv4Network(u'10.63.47.64/30')}, 2: {'second_host': '10.63.47.70', 'vlan': 2441, 'netmask': '255.255.255.252', 'first_host': '10.63.47.69', 'nw': CalcIPv4Network(u'10.63.47.68/30')}, 3: {'second_host': '10.63.47.74', 'vlan': 2442, 'netmask': '255.255.255.252', 'first_host': '10.63.47.73', 'nw': CalcIPv4Network(u'10.63.47.72/30')}, 4: {'second_host': '10.63.47.78', 'vlan': 2443, 'netmask': '255.255.255.252', 'first_host': '10.63.47.77', 'nw': CalcIPv4Network(u'10.63.47.76/30')}, 5: {'second_host': '10.63.47.82', 'vlan': 2444, 'netmask': '255.255.255.252', 'first_host': '10.63.47.81', 'nw': CalcIPv4Network(u'10.63.47.80/30')}, 6: {'second_host': '10.63.47.86', 'vlan': 2445, 'netmask': '255.255.255.252', 'first_host': '10.63.47.85', 'nw': CalcIPv4Network(u'10.63.47.84/30')}, 7: {'second_host': '10.63.47.90', 'vlan': 2446, 'netmask': '255.255.255.252', 'first_host': '10.63.47.89', 'nw': CalcIPv4Network(u'10.63.47.88/30')}, 8: {'second_host': '10.63.47.94', 'vlan': 2447, 'netmask': '255.255.255.252', 'first_host': '10.63.47.93', 'nw': CalcIPv4Network(u'10.63.47.92/30')}, 9: {'second_host': '10.63.47.98', 'vlan': 2448, 'netmask': '255.255.255.252', 'first_host': '10.63.47.97', 'nw': CalcIPv4Network(u'10.63.47.96/30')}, 10: {'second_host': '10.63.47.102', 'vlan': 2449, 'netmask': '255.255.255.252', 'first_host': '10.63.47.101', 'nw': CalcIPv4Network(u'10.63.47.100/30')}}
10.91.116.71
10.91.116.72
JAN232
10.232.0.24
NV-GW01-N2-BLR
vni-0/1.464
30.232.2.1
<type 'xrange'>
91
NV-WC01-N2-BLR
1
10.232.0.23
NV-WC01-N2-BLR@JAN232.com
10.232.64.23
193.232.1.2















