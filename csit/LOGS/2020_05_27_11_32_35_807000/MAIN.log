2020-05-27 11:33:21,167 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - LOG FILE PATH : C:\Softwares_mine\stefano\NV_REPOSITORY\csit/LOGS/2020_05_27_11_32_35_807000/MAIN.log
2020-05-27 11:33:21,167 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - CPE NAME:CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P
2020-05-27 11:33:22,167 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - SOLUTION SELECTED:DUAL-CPE-DUAL-INTERNET
2020-05-27 11:33:23,832 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {u'versanms.sdwan-org-workflow': {u'ikeAuthType': u'psk', u'globalId': 90, u'orgName': u'IPC00190', u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC01-N6-SIN', u'NV-WC02-N1-HKG', u'NV-WC02-N6-SIN'], u'bandwidth': 10, u'parentOrg': u'Colt', u'vrfs': [{u'name': u'LAN1-VRF', u'enableVPN': True, u'id': 1020}, {u'name': u'LAN2-VRF', u'enableVPN': True, u'id': 1021}, {u'name': u'LAN3-VRF', u'enableVPN': True, u'id': 1022}, {u'name': u'LAN4-VRF', u'enableVPN': True, u'id': 1023}, {u'name': u'LAN5-VRF', u'enableVPN': True, u'id': 1024}, {u'name': u'LAN6-VRF', u'enableVPN': True, u'id': 1025}, {u'name': u'LAN7-VRF', u'enableVPN': True, u'id': 1026}, {u'name': u'LAN8-VRF', u'enableVPN': True, u'id': 1027}, {u'name': u'LAN9-VRF', u'enableVPN': True, u'id': 1028}, {u'name': u'LAN10-VRF', u'enableVPN': True, u'id': 1029}], u'solutionTier': u'base-sdwan', u'sharedControlPlane': False}}
2020-05-27 11:33:23,832 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - 
STEP :CHECK ORG is available in Controller NV-WC01-N1-HKG
2020-05-27 11:33:23,832 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - PASS
2020-05-27 11:33:24,223 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {u'versanms.sdwan-org-workflow': {u'ikeAuthType': u'psk', u'globalId': 90, u'orgName': u'IPC00190', u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC01-N6-SIN', u'NV-WC02-N1-HKG', u'NV-WC02-N6-SIN'], u'bandwidth': 10, u'parentOrg': u'Colt', u'vrfs': [{u'name': u'LAN1-VRF', u'enableVPN': True, u'id': 1020}, {u'name': u'LAN2-VRF', u'enableVPN': True, u'id': 1021}, {u'name': u'LAN3-VRF', u'enableVPN': True, u'id': 1022}, {u'name': u'LAN4-VRF', u'enableVPN': True, u'id': 1023}, {u'name': u'LAN5-VRF', u'enableVPN': True, u'id': 1024}, {u'name': u'LAN6-VRF', u'enableVPN': True, u'id': 1025}, {u'name': u'LAN7-VRF', u'enableVPN': True, u'id': 1026}, {u'name': u'LAN8-VRF', u'enableVPN': True, u'id': 1027}, {u'name': u'LAN9-VRF', u'enableVPN': True, u'id': 1028}, {u'name': u'LAN10-VRF', u'enableVPN': True, u'id': 1029}], u'solutionTier': u'base-sdwan', u'sharedControlPlane': False}}
2020-05-27 11:33:24,224 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - 
STEP :CHECK ORG is available in Controller NV-WC02-N6-SIN
2020-05-27 11:33:24,224 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - PASS
2020-05-27 11:33:24,622 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {u'versanms.sdwan-org-workflow': {u'ikeAuthType': u'psk', u'globalId': 90, u'orgName': u'IPC00190', u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC01-N6-SIN', u'NV-WC02-N1-HKG', u'NV-WC02-N6-SIN'], u'bandwidth': 10, u'parentOrg': u'Colt', u'vrfs': [{u'name': u'LAN1-VRF', u'enableVPN': True, u'id': 1020}, {u'name': u'LAN2-VRF', u'enableVPN': True, u'id': 1021}, {u'name': u'LAN3-VRF', u'enableVPN': True, u'id': 1022}, {u'name': u'LAN4-VRF', u'enableVPN': True, u'id': 1023}, {u'name': u'LAN5-VRF', u'enableVPN': True, u'id': 1024}, {u'name': u'LAN6-VRF', u'enableVPN': True, u'id': 1025}, {u'name': u'LAN7-VRF', u'enableVPN': True, u'id': 1026}, {u'name': u'LAN8-VRF', u'enableVPN': True, u'id': 1027}, {u'name': u'LAN9-VRF', u'enableVPN': True, u'id': 1028}, {u'name': u'LAN10-VRF', u'enableVPN': True, u'id': 1029}], u'solutionTier': u'base-sdwan', u'sharedControlPlane': False}}
2020-05-27 11:33:24,622 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - 
STEP :CHECK ORG is available in Controller NV-WC02-N1-HKG
2020-05-27 11:33:24,622 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - PASS
2020-05-27 11:33:24,622 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - 
STEP :POST STAGING TEMPLATE CREATION AND DEPLOYMENT
2020-05-27 11:33:24,673 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {
  "versanms.sdwan-template-workflow": {
    "templateName": "IPC00190-SIN-DUAL-DINTP",
    "templateType": "sdwan-post-staging",
    "controllers": ["NV-WC01-N1-HKG", "NV-WC02-N1-HKG"],
    "providerOrg": {
      "name": "IPC00190",
      "statefulFW": false,
      "nextGenFW": false
    },
    "analyticsCluster": "LogCollectors-GGN",
    "deviceFirmfactor": "6",
    "wanInterfaces": [
      {
        "interfaceName": "vni-0/2",
        "pppoe": false,
        "unitInfo": [
          {
            "subUnit": 0,
            "vlanId": 0,
            "networkName": "INT-WAN1",
            "ipv4Static": true,
            "ipv4Dhcp": false,
            "ipv6Static": false,
            "ipv6Dhcp": false,
            "allowSSH": false,
            "monitor": {},
            "linkPriority": "",
            "transportDomains": [
              "MPLS-TD"
            ]
          }
        ]
      }
    ],
    "redundantWanInterfaces": [
      {
        "interfaceName": "vni-0/2",
        "pppoe": false,
        "unitInfo": [
          {
            "subUnit": 0,
            "vlanId": 0,
            "networkName": "INT-WAN2",
            "ipv4Static": true,
            "ipv4Dhcp": false,
            "ipv6Static": false,
            "ipv6Dhcp": false,
            "allowSSH": false,
            "monitor": {},
            "linkPriority": "",
            "transportDomains": [
              "INTERNET-TD"
            ]
          }
        ]
      }
    ],
    "crossConnectport": "vni-0/3",
    "deviceType": "full-mesh",
    "redundantPair": {
      "enable": true,
      "templateName": "IPC00190-SIN-DUAL-DINTS",
      "vrrp": true,
      "cloudCPE": false
    },
    "lanInterfaces": [
      {
		"interfaceName": "vni-0/4",
		"unitInfo": [
		{
			"subUnit": "{$v_vni-0-4_LAN1_Unit-0__unit}",
			"vlanId": "{$v_vni-0-4_LAN1_Unit-0__vlanId}",
			"networkName": "LAN1",
			"subOrganization": "IPC00190",
			"ipv4Static": true,
			"ipv4Dhcp": false,
			"ip6Static": false,
			"ipv6Dhcp": false,
			"vrfName": "LAN1-VRF",
			"zoneName": ""
		}
		
	]
	}
    ],
    "solutionTier": "standard-sdwan",
    "bandwidth": 1000,
    "customParams": [],
    "minimumImageVersion": "16.1R2-S9",
    "isAnalyticsEnabled": true,
    "isPrimary": true,
    "diaConfig": {
    "loadBalance": true
    },
    "splitTunnels": [
    {
        "vrfName": "LAN1-VRF",
        "wanNetworkName": "INT-WAN1",
        "dia": true,
        "gateway": false
      },
      {
        "vrfName": "LAN1-VRF",
        "wanNetworkName": "INT-WAN2",
        "dia": true,
        "gateway": false
      }
    
    ],
    "inBoundNats": []
  }
}
2020-05-27 11:33:25,555 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - <Response [200]>
2020-05-27 11:33:25,555 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
PASS
2020-05-27 11:33:25,555 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - >>>>>>>>>> POST STAGING TEMPLATE CREATION PASSED. <<<<<<<<<<<
2020-05-27 11:33:57,131 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - <Response [200]>
2020-05-27 11:34:02,132 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
PASS
2020-05-27 11:34:02,134 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - >>>>>>>>>> POST STAGING TEMPLATE DEPLOY PASSED. <<<<<<<<<<<
2020-05-27 11:34:07,625 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {u'versanms.sdwan-template-workflow': {u'providerOrg': {u'nextGenFW': False, u'name': u'IPC00190', u'statefulFW': False}, u'snmp': {u'snmpV1': False, u'snmpV2': False, u'snmpV3': False}, u'minimumImageVersion': u'16.1R2-S9', u'wanInterfaces': [{u'unitInfo': [{u'ipv6Dhcp': False, u'monitor': {u'monitorNexthop': False}, u'allowSSH': False, u'ipv4Static': True, u'DIA': False, u'vlanId': 0, u'transportDomains': [u'MPLS-TD'], u'ipv4Dhcp': False, u'ipv6rs': False, u'subUnit': 0, u'networkName': u'INT-WAN1', u'ipv6Static': False}], u'interfaceName': u'vni-0/2', u'pppoe': False}], u'diaConfig': {u'loadBalance': True, u'dia': False}, u'templateName': u'IPC00190-SIN-DUAL-DINTP', u'isPrimary': True, u'isAnalyticsEnabled': True, u'lanInterfaces': [{u'unitInfo': [{u'ipv6Dhcp': False, u'ipv4DhcpServer': False, u'vrfName': u'LAN1-VRF', u'ipv6ra': False, u'ipv4Static': True, u'DIA': False, u'vlanId': u'{$v_vni-0-4_LAN1_Unit-0__vlanId}', u'ip6Static': False, u'ipv4Dhcp': False, u'subOrganization': u'IPC00190', u'subUnit': u'{$v_vni-0-4_LAN1_Unit-0__unit}', u'networkName': u'LAN1', u'dhcpV4Relay': False}], u'interfaceName': u'vni-0/4'}], u'bandwidth': 1000, u'controllers': [u'NV-WC01-N1-HKG', u'NV-WC02-N1-HKG'], u'templateType': u'sdwan-post-staging', u'crossConnectport': u'vni-0/3', u'deviceType': u'full-mesh', u'redundantPair': {u'vrrp': True, u'enable': True, u'templateName': u'IPC00190-SIN-DUAL-DINTS', u'cloudCPE': False}, u'redundantWanInterfaces': [{u'unitInfo': [{u'ipv6Dhcp': False, u'monitor': {u'monitorNexthop': False}, u'allowSSH': False, u'ipv4Static': True, u'DIA': False, u'vlanId': 0, u'transportDomains': [u'INTERNET-TD'], u'ipv4Dhcp': False, u'ipv6rs': False, u'subUnit': 0, u'networkName': u'INT-WAN2', u'ipv6Static': False}], u'interfaceName': u'vni-0/2', u'pppoe': False}], u'solutionTier': u'standard-sdwan', u'deviceFirmfactor': 6, u'analyticsCluster': u'LogCollectors-GGN', u'splitTunnels': [{u'wanNetworkName': u'INT-WAN1', u'vrfName': u'LAN1-VRF', u'dia': True, u'gateway': False}, {u'wanNetworkName': u'INT-WAN2', u'vrfName': u'LAN1-VRF', u'dia': True, u'gateway': False}]}}
2020-05-27 11:34:17,700 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - <netmiko.versa.versa_ssh.VersaSSH object at 0x000000000D4B2AC8>
2020-05-27 11:34:22,903 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - versa: Automated@VDir-BLR-NEW-01>
2020-05-27 11:34:22,903 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - set devices template IPC00190-SIN-DUAL-DINTP config interfaces vni vni-0/3 description "INTERCONNECT-LINK"
delete devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR routing-options static route
set devices template IPC00190-SIN-DUAL-DINTP config system vnf-manager ip-addresses [ 10.92.116.67/32 10.92.116.68/32 ]
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 hold-time 90
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart enable
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart maximum-restart-time 120
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart recovery-time 120
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart select-defer-time 120
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart stalepath-time 120
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart dynamic-peer-restart-time 0
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match family inet-vpn
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match community "(^|,)([0-9]*:11)($|,)"
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action filter accept
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community 8009:8009
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community-action set-specific
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action set-local-preference 80
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match family inet-vpn
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match community "(^|,)([0-9]*:12)($|,)"
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action filter accept
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community 8009:8009
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community-action set-specific
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action set-local-preference 60
move devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 first
move devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 first
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard match family inet-vpn
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action filter accept
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action community 852:10
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action community-action set-specific
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard match family versa-private
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action filter accept
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community 852:10
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community-action set-specific
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 group Controllers-Group family inet unicast
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 group Controllers-Group export TO_SDWAN

delete devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 cgnat rules rule RFC_1918_NoTranslate


###########################################################
#Note: Please use the below config, in case of Wired solution. Both CPEs on Wired
###########################################################
delete device template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule Default-Rule
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names local [ INT-WAN1 INT-WAN2 ]
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names remote [ INT-WAN INT-WAN1 INT-WAN2 ]
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names local [ INT-WAN1 INT-WAN2 ]
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names remote [ LTE-WAN ]
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE connection-selection-method weighted-round-robin
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE recompute-timer 40
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE encryption optional
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE symmetric-forwarding enable
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE description DEFAULT-TRAFFIC-RULE
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE set action allow
set devices template IPC00190-SIN-DUAL-DINTP config org org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE set forwarding-profile DEFAULT-TRAFFIC-PROFILE


Below Lines should be applied depending on the Number LAN VRFs available. Below is the example for 10VRFs.



set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects zones zone Intf-LAN1-Zone description LAN1



set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF vrf-import-target target:1020L:10202

set devices template IPC00190-SIN-DUAL-DINTP config snmp usm local user coltuser auth sha password Colt1234

set devices template IPC00190-SIN-DUAL-DINTP config system time-zone Greenwich
set devices template IPC00190-SIN-DUAL-DINTP config confdConfig cli banner "Access to this network/system is limited to users authorised by Colt for its legitimate business purposes. Unauthorised access, use, installation of files or modification of any data is prohibited. Use of this system/network will be audited"
set devices template IPC00190-SIN-DUAL-DINTP config system users portal login shell role admin password yA:D#{}Vn9JE-?Qa
set devices template IPC00190-SIN-DUAL-DINTP config system users portal ssh-public-key portal contents "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDo+WWU8BDyqZCYadUGElffuy1pkOo4nrg/yfOqV84G+ukVGf+SF48h+543zMxMmKTauHEqmSp+74IbSpN9buBom/BFpBTm3c66BErMmLNariqvfItG7CO9UBPqoXpUBAXnF/muohwe145jEyRRI4Lof2wK6F6qYjzTQHK+zp5IpV6D+VurfQ6fIQB2oUIj9c8OG3Zfyp33l9utdLCzR7Uo4OGt9GidMrO2mXSBWXb+L5o6MAiOB4EhKvVyG9O8+So7zHEcUI65bq3JWzLzM7w705ySVwitEeqCx2wS7v/2KNuHmI8kSQVOuXQ539V3PJThvlVPY7ABmrY5+4MZT+Fv novitas@colt.net"

#set devices template IPC00190-SIN-DUAL-DINTP config system external-aaa auth-order remote-then-local
#set devices template IPC00190-SIN-DUAL-DINTP config system external-aaa tacacs-plus server 10.5.22.116 key C:ifiiape.
#set devices template IPC00190-SIN-DUAL-DINTP config system external-aaa tacacs-plus server 10.5.22.117 key C:ifiiape.
#set devices template IPC00190-SIN-DUAL-DINTP config system external-aaa tacacs-plus action [ accounting authentication ]



#PART2:
set devices template IPC00190-SIN-DUAL-DINTP config interfaces vni vni-0/2 description "INT-WAN1"





set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services predefined-services-list [ ESP ICMP ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services services-list [ IPSEC IPSecAH ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services predefined-services-list [ ESP ICMP ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services services-list [ IPSEC IPSIPSecAH ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match ether-type ARP
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match ether-type ARP
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone  ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match services services-list [ DHCP-67 DHCP-68 ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match services services-list [ DHCP-67 DHCP-68 ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT match destination zone zone-list [ Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN match source zone zone-list [ Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN set action allow
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN set action deny
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT set action deny
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSEC protocol UDP
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSEC port 4790,4500,500
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSecAH protocol AH
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSIPSecAH protocol AH
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-67 protocol UDP
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-67 port 67
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-68 protocol UDP
set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-68 port 68

#Repeat following steps for all LAN-VRFs with corresponding <LAN_NO>. This is only required for LIB




#Similarly below Lines should be applied depending on the Number LAN VRFs available. Below is the example for LAN1-VRF.
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC match protocol static
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action filter accept
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action set-origin igp
set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy Default-Policy-To-BGP term T3-STATIC action set-local-preference 110


2020-05-27 11:35:05,309 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - configure
Entering configuration mode private
[ok][2020-05-27 06:06:41]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config interfaces vni vni-0/3 description "INTERCONNECT-LINK"
[ok][2020-05-27 06:06:41]

[edit]
Automated@VDir-BLR-NEW-01% delete devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR routing-options static  route
[ok][2020-05-27 06:06:42]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config system vnf-manager ip-addresses [ 10.92.116.67/32 10.92.116.68/32 ]
[ok][2020-05-27 06:06:42]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 hold-time 90
[ok][2020-05-27 06:06:42]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart enable
[ok][2020-05-27 06:06:43]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart maximum-restart-time 120
[ok][2020-05-27 06:06:43]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart recovery-time 120
[ok][2020-05-27 06:06:43]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart select-defer-time 120
[ok][2020-05-27 06:06:44]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart stalepath-time 120
[ok][2020-05-27 06:06:44]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 graceful-restart dynamic-peer-restart-time 0
[ok][2020-05-27 06:06:45]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match family inet-vpn
[ok][2020-05-27 06:06:45]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 match community "(^|,)([0-9]*:11)($|,)"
[ok][2020-05-27 06:06:46]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action filter accept
[ok][2020-05-27 06:06:46]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community 8009:8009
[ok][2020-05-27 06:06:47]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action community-action set-specific
[ok][2020-05-27 06:06:47]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 action set-local-preference 80 
[ok][2020-05-27 06:06:48]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match family inet-vpn
[ok][2020-05-27 06:06:49]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 match community "(^|,)([0-9]*:12)($|,)"
[ok][2020-05-27 06:06:49]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action filter accept
[ok][2020-05-27 06:06:50]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community 8009:8009
[ok][2020-05-27 06:06:50]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action community-action set-specific
[ok][2020-05-27 06:06:51]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 action set-local-preference 60 
[ok][2020-05-27 06:06:51]

[edit]
Automated@VDir-BLR-NEW-01% move devices template IPC00190-SIN-DUAL-DINTP config  routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 2GW2 first
[ok][2020-05-27 06:06:52]

[edit]
Automated@VDir-BLR-NEW-01% move devices template IPC00190-SIN-DUAL-DINTP config  routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy Import-From-SDWAN-Policy term 1GW1 first
[ok][2020-05-27 06:06:52]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard match family inet-vpn
[ok][2020-05-27 06:06:53]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action filter accept
[ok][2020-05-27 06:06:53]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action community 852:10
[ok][2020-05-27 06:06:54]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term Wildcard action community-action set-specific
[ok][2020-05-27 06:06:54]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard match family versa-private
[ok][2020-05-27 06:06:54]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action filter accept
[ok][2020-05-27 06:06:55]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community 852:10
[ok][2020-05-27 06:06:55]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 routing-peer-policy TO_SDWAN term VersaPvt-Wildcard action community-action set-specific
[ok][2020-05-27 06:06:55]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 group  Controllers-Group family inet unicast
[ok][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance IPC00190-Control-VR protocols bgp bgp 90 group  Controllers-Group export TO_SDWAN
[ok][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% delete devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 cgnat rules rule RFC_1918_NoTranslate
Error: element not found
[error][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% ###########################################################
[ok][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% #Note: Please use the below config, in case of Wired  solution. Both CPEs on Wired
[ok][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% ###########################################################
[ok][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% delete devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule Default-Rule
Error: element not found
[error][2020-05-27 06:06:56]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names local [ INT-WAN1 INT-WAN2 ]
[ok][2020-05-27 06:06:57]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 1 circuit-names remote [ INT-WAN INT-WAN1 INT-WAN2 ]
[ok][2020-05-27 06:06:57]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names local [ INT-WAN1 INT-WAN2 ]
[ok][2020-05-27 06:06:57]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE circuit-priorities priority 2 circuit-names remote [ LTE-WAN ]
[ok][2020-05-27 06:06:58]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE connection-selection-method weighted-round-robin
[ok][2020-05-27 06:06:58]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE recompute-timer 40
[ok][2020-05-27 06:06:58]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE encryption optional
[ok][2020-05-27 06:06:58]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan forwarding-profiles forwarding-profile DEFAULT-TRAFFIC-PROFILE symmetric-forwarding enable
[ok][2020-05-27 06:06:59]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE description DEFAULT-TRAFFIC-RULE
[ok][2020-05-27 06:06:59]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE set action allow
[ok][2020-05-27 06:06:59]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 sd-wan policies sdwan-policy-group Default-Policy rules rule DEFAULT-TRAFFIC-RULE set forwarding-profile DEFAULT-TRAFFIC-PROFILE
[ok][2020-05-27 06:07:00]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% Below Lines should be applied depending on the Number  LAN VRFs available. Below is the example for 10VRFs.
---------------------------^
syntax error: expecting 
  activate        - Activate a statement
  annotate        - Add a comment to a statement
  clear           - 
  commit          - Commit current set of changes
  compare         - Show configuration differences
  copy            - Copy a list entry
  deactivate      - Deactivate a statement
  delete          - Delete a data element
  describe        - Display transparent command  information
  edit            - Edit a sub-element
  exit            - Exit from this level
  help            - Provide help information
  insert          - Insert a parameter
  load            - Load configuration from an ASCII file
  move            - Move a parameter
  quit            - Exit from this level
  rename          - Rename an identifier
  request         - Make system-level requests
  resolved        - Conflicts have been resolved
  revert          - Copy configuration from running
  rollback        - Roll back database to last committed version
  run             - Run an operational-mode command
  save            - Save configuration to an ASCII file
  save-device-cfg - save device settings
  set             - Set a parameter
  shell           - Open a shell
  show            - Show a parameter
  status          - Display users currently editing the configuration
  switch          - Change CLI style
  tag             - Manipulate statement tags
  top             - Exit to top level and optionally run command
  up              - Exit one level of configuration
  validate        - Validate current configuration
[error][2020-05-27 06:07:00]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects zones zone Intf-LAN1-Zone description LAN1
[ok][2020-05-27 06:07:00]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF vrf-import-target target:1020L:10202
[ok][2020-05-27 06:07:00]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config snmp usm local user coltuser auth sha password Colt1234
[ok][2020-05-27 06:07:00]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config system time-zone Greenwich
[ok][2020-05-27 06:07:00]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config confdConfig cli banner "Access to this network/system is limited to users authorised by Colt for its legitimate business purposes. Unauthorised access, use, installation of files or modification of any data is prohibited. Use of this system/network will be audited"
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config system users portal login shell role admin password yA:D#{}Vn9JE-?Qa
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config system users portal ssh-public-key portal contents "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDo+WWU8BDyqZCYadUGElffuy1pkOo4nrg/yfOqV84G+ukVGf+SF48h+543zMxMmKTauHEqmSp+74IbSpN9buBom/BFpBTm3c66BErMmLNariqvfItG7CO9UBPqoXpUBAXnF/muohwe145jEyRRI4Lof2wK6F6qYjzTQHK+zp5IpV6D+VurfQ6fIQB2oUIj9c8OG3Zfyp33l9utdLCzR7Uo4OGt9GidMrO2mXSBWXb+L5o6MAiOB4EhKvVyG9O8+So7zHEcUI65bq3JWzLzM7w705ySVwitEeqCx2wS7v/2KNuHmI8kSQVOuXQ539V3PJThvlVPY7ABmrY5+4MZT+Fv novitas@colt.net"
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #set devices template IPC00190-SIN-DUAL-DINTP config  system external-aaa auth-order remote-then-local
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% #set devices template IPC00190-SIN-DUAL-DINTP config  system external-aaa tacacs-plus server 10.5.22.116 key C:ifiiape.
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% #set devices template IPC00190-SIN-DUAL-DINTP config  system external-aaa tacacs-plus server 10.5.22.117 key C:ifiiape.
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% #set devices template IPC00190-SIN-DUAL-DINTP config  system external-aaa tacacs-plus action [ accounting authentication ]
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #PART2:
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config interfaces vni vni-0/2 description "INT-WAN1"
[ok][2020-05-27 06:07:01]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:02]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services predefined-services-list [ ESP  ICMP ]
[ok][2020-05-27 06:07:02]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN match services services-list [ IPSEC IPSecAH ] 
[ok][2020-05-27 06:07:03]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_IN set action allow
[ok][2020-05-27 06:07:03]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:04]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services predefined-services-list [ ESP  ICMP ]
[ok][2020-05-27 06:07:05]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT match services services-list [ IPSEC IPSIPSecAH ]
[ok][2020-05-27 06:07:06]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy IPSEC_OUT set action allow
[ok][2020-05-27 06:07:06]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match source zone zone-list [ Intf-INT-WAN1-Zone  Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:07]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN match ether-type ARP
[ok][2020-05-27 06:07:08]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_IN set action allow
[ok][2020-05-27 06:07:08]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:09]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT match ether-type ARP
[ok][2020-05-27 06:07:10]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy ARP_OUT set action allow
[ok][2020-05-27 06:07:10]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone 
Possible completions:
  string  ]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match source zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:11]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN match services services-list [ DHCP-67 DHCP-68  ]
[ok][2020-05-27 06:07:11]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_IN set action allow
[ok][2020-05-27 06:07:12]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:12]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT match services services-list [ DHCP-67 DHCP-68  ]
[ok][2020-05-27 06:07:13]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy DHCP_OUT set action allow
[ok][2020-05-27 06:07:13]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT match destination zone zone-list [ Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:14]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_OUT set action allow
[ok][2020-05-27 06:07:14]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN match source zone zone-list [ Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:15]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy INT_IN set action allow
[ok][2020-05-27 06:07:15]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN match source zone zone-list [ Intf-INT-WAN1-Zone  Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:16]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_IN set action deny
[ok][2020-05-27 06:07:16]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT match destination zone zone-list [ Intf-INT-WAN1-Zone Intf-INT-WAN1-Failover-Zone Intf-INT-WAN2-Zone ]
[ok][2020-05-27 06:07:17]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 class-of-service qos-policies qos-policy-group Default-Policy rules qos-policy WAN_OUT set action deny
[ok][2020-05-27 06:07:17]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSEC protocol UDP
[ok][2020-05-27 06:07:18]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSEC port 4790,4500,500
[ok][2020-05-27 06:07:18]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSecAH protocol AH
[ok][2020-05-27 06:07:19]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service IPSIPSecAH protocol AH
[ok][2020-05-27 06:07:19]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-67 protocol UDP
[ok][2020-05-27 06:07:19]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-67 port 67
[ok][2020-05-27 06:07:19]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-68 protocol UDP
[ok][2020-05-27 06:07:20]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config orgs org-services IPC00190 objects services service DHCP-68 port 68
[ok][2020-05-27 06:07:20]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #Repeat following steps for all LAN-VRFs with corresponding <LAN_NO>. This is only required for LIB
[ok][2020-05-27 06:07:20]

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% 

[edit]
Automated@VDir-BLR-NEW-01% #Similarly below Lines should be applied depending on  the Number LAN VRFs available. Below is the example for LAN1-VRF.
[ok][2020-05-27 06:07:20]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy  Default-Policy-To-BGP term T3-STATIC match protocol static
[ok][2020-05-27 06:07:20]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy  Default-Policy-To-BGP term T3-STATIC action filter accept
[ok][2020-05-27 06:07:20]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy  Default-Policy-To-BGP term T3-STATIC action set-origin igp
[ok][2020-05-27 06:07:21]

[edit]
Automated@VDir-BLR-NEW-01% set devices template IPC00190-SIN-DUAL-DINTP config routing-instances routing-instance LAN1-VRF policy-options redistribution-policy  Default-Policy-To-BGP term T3-STATIC action set-local-preference 110
[ok][2020-05-27 06:07:21]

[edit]
Automated@VDir-BLR-NEW-01% 
2020-05-27 11:35:05,914 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - commit
Commit complete.
[ok][2020-05-27 06:07:24]

[edit]
Automated@VDir-BLR-NEW-01% 
2020-05-27 11:35:05,979 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - <netmiko.versa.versa_ssh.VersaSSH object at 0x000000000D4B2AC8> connection closed
2020-05-27 11:35:05,979 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P : syntax error found.Commit success.
2020-05-27 11:35:05,979 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - >>>>>>>>>> PS MAIN TEMPLATE MODIFY PASSED. <<<<<<<<<<<
2020-05-27 11:35:10,979 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - 
STEP :DEVICE GROUP CREATION AND DEPLOYMENT
2020-05-27 11:35:11,003 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {
	"device-group": {
		"name": "IPC00190-SIN-DUAL-DINTP-DG",
		"dg:organization": "IPC00190",
		"dg:enable-2factor-auth": false,
		"dg:enable-staging-url": false,
		"dg:poststaging-template": "IPC00190-SIN-DUAL-DINTP"
	}
}
2020-05-27 11:35:11,250 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - <Response [201]>
2020-05-27 11:35:11,250 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
PASS
2020-05-27 11:35:11,250 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - >>>>>>>>>> DEVICE GROUP TEMPLATE CREATION PASSED. <<<<<<<<<<<
2020-05-27 11:35:16,250 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - 
STEP :PRE-ONBOARD WORK
2020-05-27 11:35:16,418 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
sudo /opt/versa/scripts/staging.py -w 2 -c 10.83.130.49 -s 172.16.6.102/30 -g 172.16.6.101 -l IPC00190-CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P@colt.net -lk CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P  -r NV-WC01-N1-HKG@colt.net -rk 1234

2020-05-27 11:35:16,418 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {
  "versanms.sdwan-device-workflow": {
	"deviceName": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P",
	"siteId": "4286",
	"orgName": "IPC00190",
	"serialNumber": "CPE26may22",
	"deviceGroup": "IPC00190-SIN-DUAL-DINTP-DG",
    "locationInfo": {
      "country": "singapore",
      "longitude": "103.819836",
      "latitude": "1.352083"
    },
    "postStagingTemplateInfo": {
      "templateName": "IPC00190-SIN-DUAL-DINTP",
      "templateData": {
        "device-template-variable": {
          "template": "IPC00190-SIN-DUAL-DINTP",
          "variable-binding": {
            "attrs": [
              {
                "name": "{$v_IPC00190_NV-WC01-N1-HKG_Local_auth_email_identifier__IKELIdentifier}",
                "value": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P@colt.net",
                "isAutogeneratable": true
              },
              {
                "name": "{$v_IPC00190_NV-WC01-N1-HKG_Local_auth_email_key__IKELKey}",
                "value": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P",
                "isAutogeneratable": true
              },
              {
                "name": "{$v_IPC00190-Control-VR_90_Router_ID__vrRouteId}",
                "value": "20.20.90.26",
                "isAutogeneratable": true,
                "isOverwritten": true
              },
              {
                "name": "{$v_Paired_Site__locationID}",
                "value": "4287",
                "isAutogeneratable": false
              },
              {
                "name": "{$v_IPC00190_NV-WC02-N1-HKG_Local_auth_email_key__IKELKey}",
                "value": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P",
                "isAutogeneratable": true
              },
              {
				"name": "{$v_INT-WAN1_IPv4__staticaddress}",
				"value": "172.16.6.102/30",
				"isAutogeneratable": false
              },
              {
                "name": "{$v_IPC00190_Site_Name__sitesSiteName}",
                "value": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P",
                "isAutogeneratable": true
              },
			  
			  
			  
			  
			  { "name": "{$v_LAN1_vrrp__vrrpVirtualAddress}", "value": "192.170.1.1", "isAutogeneratable": false},
			  { "name": "{$v_LAN1_IPv4__staticaddress}", "value": "192.170.1.2/24", "isAutogeneratable": false},
			  
              {
                "name": "{$v_tvi-0-181_-_Unit_0_Static_address__tunnelStaticAddress}",
                "value": "20.20.90.26/32",
                "isAutogeneratable": true,
                "isOverwritten": true
              },
              {
                "name": "{$v_latitude__IdLatitude}",
                "value": 1.352083,
                "isAutogeneratable": true
              },
              {
                "name": "{$v_INT-WAN1-Transport-VR_IPv4__vrHopAddress}",
                "value": "172.16.6.101",
                "isAutogeneratable": false
              },
              {
                "name": "{$v_identification__IdName}",
                "value": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P",
                "isAutogeneratable": true
              },
              {
                "name": "{$v_tvi-0-180_-_Unit_0_Static_address__tunnelStaticAddress}",
                "value": "10.10.90.26/32",
                "isAutogeneratable": true,
                "isOverwritten": true
              },
              {
                "name": "{$v_IPC00190_NV-WC02-N1-HKG_Local_auth_email_identifier__IKELIdentifier}",
                "value": "CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P@colt.net",
                "isAutogeneratable": true
              },
              {
                "name": "{$v_Chassis_Id__sitesChassisId}",
                "value": "4286",
                "isAutogeneratable": true
              },
              {
                "name": "{$v_longitude__Idlongitude}",
                "value": 103.819836,
                "isAutogeneratable": true
              },
              {
                "name": "{$v_IPC00190-Control-VR_90_Local_address__vrRouterAddress}",
                "value": "20.20.90.26",
                "isAutogeneratable": true,
                "isOverwritten": true
              },
              {
                "name": "{$v_location__IdLocation}",
                "value": "singapore",
                "isAutogeneratable": true
              },
			
				
				
				
			{ "name": "{$v_vni-0-4_LAN1_Unit-0__unit}", "value": "750", "isAutogeneratable": false},
			{ "name": "{$v_vni-0-4_LAN1_Unit-0__vlanId}", "value": "750", "isAutogeneratable": false },
			
              {
                "name": "{$v_Site_Id__siteSiteID}",
                "value": "4286",
                "isAutogeneratable": true
              }
            ]
          }
        },
        "variableMetadata": [
          {
            "variable": "{$v_IPC00190_NV-WC01-N1-HKG_Local_auth_email_identifier__IKELIdentifier}",
            "group": "IPSEC",
            "overlay": false
          },
          {
            "variable": "{$v_IPC00190_NV-WC01-N1-HKG_Local_auth_email_key__IKELKey}",
            "group": "IPSEC",
            "overlay": false
          },
          {
            "variable": "{$v_IPC00190-Control-VR_90_Router_ID__vrRouteId}",
            "group": "Virtual routers",
            "overlay": true,
            "type": "IPV4"
          },
          {
            "variable": "{$v_Paired_Site__locationID}",
            "group": "SDWAN",
            "overlay": false
          },
          {
            "variable": "{$v_IPC00190_NV-WC02-N1-HKG_Local_auth_email_key__IKELKey}",
            "group": "IPSEC",
            "overlay": false
          },
          {
            "variable": "{$v_INT-WAN1_IPv4__staticaddress}",
            "group": "Interfaces",
            "overlay": false,
            "type": "IPV4_MASK"
          },
          {
            "variable": "{$v_IPC00190_Site_Name__sitesSiteName}",
            "group": "SDWAN",
            "overlay": false
          },
		{ "variable": "{$v_LAN1_vrrp__vrrpVirtualAddress}", "group": "Others", "overlay": false, "type": "IPV4" },
		{ "variable": "{$v_LAN1_IPv4__staticaddress}", "group": "Interfaces", "overlay": false, "type": "IPV4_MASK" },
		
          {
            "variable": "{$v_tvi-0-181_-_Unit_0_Static_address__tunnelStaticAddress}",
            "group": "Interfaces",
            "overlay": true,
            "type": "IPV4_IPV6_MASK"
          },
          {
            "variable": "{$v_latitude__IdLatitude}",
            "group": "SDWAN",
            "overlay": false
          },
          {
            "variable": "{$v_INT-WAN1-Transport-VR_IPv4__vrHopAddress}",
            "group": "Virtual Routers",
            "overlay": false,
            "type": "IPV4"
          },
          {
            "variable": "{$v_identification__IdName}",
            "group": "SDWAN",
            "overlay": false
          },
          {
            "variable": "{$v_tvi-0-180_-_Unit_0_Static_address__tunnelStaticAddress}",
            "group": "Interfaces",
            "overlay": true,
            "type": "IPV4_IPV6_MASK"
          },
          {
            "variable": "{$v_IPC00190_NV-WC02-N1-HKG_Local_auth_email_identifier__IKELIdentifier}",
            "group": "IPSEC",
            "overlay": false
          },
          {
            "variable": "{$v_Chassis_Id__sitesChassisId}",
            "group": "SDWAN",
            "overlay": false
          },
          {
            "variable": "{$v_longitude__Idlongitude}",
            "group": "SDWAN",
            "overlay": false
          },
          {
            "variable": "{$v_IPC00190-Control-VR_90_Local_address__vrRouterAddress}",
            "group": "Virtual routers",
            "overlay": true,
            "type": "IPV4"
          },
          {
            "variable": "{$v_location__IdLocation}",
            "group": "SDWAN",
            "overlay": false
          },
		 
		 
		 
		 {"variable": "{$v_vni-0-4_LAN1_Unit-0__vlanId}", "group": "Vlan Info", "overlay": false, "type": "INTEGER"},
		 
          {
            "variable": "{$v_Site_Id__siteSiteID}",
            "group": "SDWAN",
            "overlay": false
          }
        ]
      }
    }
  }
}
2020-05-27 11:35:17,381 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - <Response [200]>
2020-05-27 11:35:17,381 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
PASS
2020-05-27 11:35:17,381 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - >>>>>>>>>> DEVICE TEMPLATE CREATION PASSED. <<<<<<<<<<<
2020-05-27 11:35:27,681 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {"TaskResponse":{"task-id":25018,"link":{"@rel":"GET","@href":"vnms/tasks/task/25018"}}}
2020-05-27 11:35:32,681 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 25018
2020-05-27 11:35:32,934 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {u'versa-tasks.task': {u'versa-tasks.user': u'Automated', u'versa-tasks.percentage-completion': 100, u'versa-tasks.progressmessages': {u'versa-tasks.progressmessage': [{u'versa-tasks.time': u'2020-05-27 06:07:47.045', u'versa-tasks.message': u'Creating device in hardware inventory [CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P]'}, {u'versa-tasks.time': u'2020-05-27 06:07:47.06', u'versa-tasks.message': u'Add device [CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P] to device group [IPC00190-SIN-DUAL-DINTP-DG]'}, {u'versa-tasks.time': u'2020-05-27 06:07:47.064', u'versa-tasks.message': u'Adding device [CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P] to template [ IPC00190-SIN-DUAL-DINTP ]'}, {u'versa-tasks.time': u'2020-05-27 06:07:47.088', u'versa-tasks.message': u'Binding device variables to template [ IPC00190-SIN-DUAL-DINTP ]'}, {u'versa-tasks.time': u'2020-05-27 06:07:47.262', u'versa-tasks.message': u'Adding post-staging configuration to controllers [NV-WC01-N1-HKG, NV-WC02-N1-HKG]'}, {u'versa-tasks.time': u'2020-05-27 06:07:47.828', u'versa-tasks.message': u'Deploy device Failed'}]}, u'versa-tasks.object-name': u'Device Workflow', u'versa-tasks.task-status': u'FAILED', u'versa-tasks.task-description': u'Device workflow deployment: { CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P }', u'versa-tasks.task-name': u'Deploy', u'versa-tasks.domain-name': u'PROVIDER', u'versa-tasks.id': 25018, u'versa-tasks.start-time': u'2020-05-27 06:07:46.026', u'versa-tasks.end-time': u'2020-05-27 06:07:47.828', u'versa-tasks.errormessages': {u'versa-tasks.errormessage': {u'versa-tasks.error-message': u'Configuration of controller failed :com.tailf.maapi.MaapiException: Network Element Driver: device NV-WC01-N1-HKG: out of sync', u'versa-tasks.error-code': 5000}}}}
2020-05-27 11:35:32,934 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 100
2020-05-27 11:35:32,934 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - INFO - Sleeping for 5 seconds
2020-05-27 11:35:38,180 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - {"versa-tasks.task":{"versa-tasks.id":25018,"versa-tasks.task-name":"Deploy","versa-tasks.object-name":"Device Workflow","versa-tasks.domain-name":"PROVIDER","versa-tasks.user":"Automated","versa-tasks.task-description":"Device workflow deployment: { CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P }","versa-tasks.task-status":"FAILED","versa-tasks.percentage-completion":100,"versa-tasks.progressmessages":{"versa-tasks.progressmessage":[{"versa-tasks.message":"Creating device in hardware inventory [CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P]","versa-tasks.time":"2020-05-27 06:07:47.045"},{"versa-tasks.message":"Add device [CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P] to device group [IPC00190-SIN-DUAL-DINTP-DG]","versa-tasks.time":"2020-05-27 06:07:47.06"},{"versa-tasks.message":"Adding device [CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P] to template [ IPC00190-SIN-DUAL-DINTP ]","versa-tasks.time":"2020-05-27 06:07:47.064"},{"versa-tasks.message":"Binding device variables to template [ IPC00190-SIN-DUAL-DINTP ]","versa-tasks.time":"2020-05-27 06:07:47.088"},{"versa-tasks.message":"Adding post-staging configuration to controllers [NV-WC01-N1-HKG, NV-WC02-N1-HKG]","versa-tasks.time":"2020-05-27 06:07:47.262"},{"versa-tasks.message":"Deploy device Failed","versa-tasks.time":"2020-05-27 06:07:47.828"}]},"versa-tasks.errormessages":{"versa-tasks.errormessage":{"versa-tasks.error-code":5000,"versa-tasks.error-message":"Configuration of controller failed :com.tailf.maapi.MaapiException: Network Element Driver: device NV-WC01-N1-HKG: out of sync"}},"versa-tasks.start-time":"2020-05-27 06:07:46.026","versa-tasks.end-time":"2020-05-27 06:07:47.828"}}
2020-05-27 11:35:38,180 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 'NoneType' object has no attribute 'group'
2020-05-27 11:35:38,180 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - DEBUG - 
2020-05-27 11:35:38,180 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - ERROR - >>>>>>>>>>Device deployment failed <<<<<<<<<<<
2020-05-27 11:35:38,181 - CPE26-SIN-DUAL-CPE-DUAL-INTERNET-IPC00190-P - ERROR - TASK RESULT : FAILED : Configuration of controller failed :com.tailf.maapi.MaapiException: Network Element Driver: device NV-WC01-N1-HKG: out of sync
